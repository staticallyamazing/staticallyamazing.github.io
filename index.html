<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="/favicon.ico" />
        <title>staticallyamazing.github.io</title>
    </head>
    <body>
        <br />
        <br />
        <input id="a" placeholder="url" style="width: 95vw" />
        <br />
        <button id="b">go to URL</button>
        <br />
        <button id="c">save URL to history</button>
        <br />
        <p>you can use the back key to go back here, urls will be saved in history, you can also press enter to go to URL</p>
        <br />
        <p>history:</p>
        <ol id="d">
        </ol>
        <script>
            function setLocation(url = document.querySelector("#a").value) {
                history.pushState({}, '', location.href)
                if (!url.startsWith("https://") && !url.startsWith("http://")) url = "https://" + url
                addToHistory(url)
                location.href = url
            }
            
            let history;
            try {
                history = JSON.parse(localStorage.getItem('history'))
            } catch(e) {
                history = []
            }
            
            if (localStorage.getItem('location')) {
                history.push(localStorage.getItem('location'))
                localStorage.removeItem('location')
            }
            
            for (url of history) {
                addHistoryElement(url)
            }
            
            function addHistoryElement(url) {
                const li = document.createElement('li')
                const a = document.createElement("a")
                a.textContent = url
                a.addEventListener("click", () => {
                    setLocation(url)
                })
                li.appendChild(a)
                document.querySelector("d").appendChild(li)
            }
            
            function addToHistory(url = document.querySelector("#a").value) {
                history.push(url)
                addHistoryElement(url)
                localStorage.setItem('history', JSON.stringify(history))
            }
            
            window.addEventListener('keypress', (e) => {
                if (e.keyCode === 13) {
                    e.preventDefault()
                    setLocation()
                }
            })
            
            document.querySelector("#b").addEventListener("click", () => {
                setLocation()
            })
            
            document.querySelector("#c").addEventListener("click", () => {
                addToHistory()
            })
        </script>
    </body>
</html>
